---
const { value, label = "Copy" } = Astro.props;
---

<button class="copy-btn" data-value={value}>{label}</button>
<script>
  const script = document.currentScript;
  const btn = script?.previousElementSibling;
  if (!(btn instanceof HTMLElement)) {
    // no related button found, nothing to do
  } else {
    btn.addEventListener("click", () => {
      const val = btn.getAttribute("data-value");
      navigator.clipboard.writeText(val || "").then(() => {
        const original = btn.textContent;
        btn.textContent = "Copied";
        setTimeout(() => (btn.textContent = original), 1500);
      });
    });
  }
</script>
<style>
  
</style>
